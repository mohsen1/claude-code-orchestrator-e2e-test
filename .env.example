# ============================================================================
# SPLITSYNC - ENVIRONMENT VARIABLES CONFIGURATION
# ============================================================================
# Copy this file to .env.local and fill in the values
# DO NOT commit .env.local to version control

# ----------------------------------------------------------------------------
# Application Configuration
# ----------------------------------------------------------------------------
NEXT_PUBLIC_APP_NAME=SplitSync
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:3000/api

# Application environment (development, staging, production)
NODE_ENV=development

# Port for the development server
PORT=3000

# ----------------------------------------------------------------------------
# Authentication
# ----------------------------------------------------------------------------
# Secret key for NextAuth.js - generate with: openssl rand -base64 32
NEXTAUTH_SECRET=your-secret-key-here-generate-with-openssl-rand-base64-32

# URL for NextAuth.js callbacks
NEXTAUTH_URL=http://localhost:3000

# Session configuration
NEXTAUTH_SESSION_MAX_AGE=2592000
NEXTAUTH_SESSION_UPDATE_AGE=86400

# ----------------------------------------------------------------------------
# OAuth Providers
# ----------------------------------------------------------------------------

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# GitHub OAuth (optional)
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# Microsoft OAuth (optional)
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
# SQLite database file path (relative to project root or absolute path)
DATABASE_URL=./data/splitsync.db

# Enable database WAL mode for better performance
DATABASE_WAL_MODE=true

# Database connection pool settings
DATABASE_POOL_MAX=10
DATABASE_POOL_MIN=2

# Database backup settings
DATABASE_BACKUP_ENABLED=true
DATABASE_BACKUP_DIR=./data/backups
DATABASE_BACKUP_RETENTION_DAYS=30

# ----------------------------------------------------------------------------
# Drizzle ORM Configuration
# ----------------------------------------------------------------------------
DRIZZLE_LOG_LEVEL=info

# ----------------------------------------------------------------------------
# File Upload / Storage Configuration
# ----------------------------------------------------------------------------
# Local storage path for uploaded files (receipts, avatars, etc.)
UPLOAD_DIR=./data/uploads

# Maximum file size in bytes (default: 10MB)
MAX_FILE_SIZE=10485760

# Allowed file extensions for uploads
ALLOWED_FILE_EXTENSIONS=jpg,jpeg,png,pdf,txt,csv

# If using cloud storage (S3, GCS, etc.), configure provider
# STORAGE_PROVIDER=local|s3|gcs|azure
# AWS_S3_BUCKET=
# AWS_S3_REGION=
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=

# ----------------------------------------------------------------------------
# Email Configuration (optional)
# ----------------------------------------------------------------------------
# SMTP settings for sending emails
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@splitsync.app

# Email templates
EMAIL_TEMPLATE_DIR=./templates/email

# ----------------------------------------------------------------------------
# WebSocket / Real-time Configuration
# ----------------------------------------------------------------------------
# Socket.io configuration
SOCKET_PORT=3001
SOCKET_PATH=/socket.io
SOCKET_CORS_ORIGIN=http://localhost:3000

# WebSocket heartbeat settings
SOCKET_HEARTBEAT_INTERVAL=25000
SOCKET_HEARTBEAT_TIMEOUT=5000

# Maximum concurrent connections per user
SOCKET_MAX_CONNECTIONS_PER_USER=5

# ----------------------------------------------------------------------------
# Rate Limiting & Security
# ----------------------------------------------------------------------------
# Rate limiting configuration
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=900000

# API rate limiting (stricter than general rate limit)
API_RATE_LIMIT_MAX=50
API_RATE_LIMIT_WINDOW_MS=60000

# Authentication rate limiting
AUTH_RATE_LIMIT_MAX=5
AUTH_RATE_LIMIT_WINDOW_MS=60000

# CORS configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# CSRF protection
CSRF_SECRET=your-csrf-secret-here

# ----------------------------------------------------------------------------
# Logging & Monitoring
# ----------------------------------------------------------------------------
# Log level (trace, debug, info, warn, error, fatal)
LOG_LEVEL=info

# Enable structured JSON logging
LOG_JSON_FORMAT=true

# Enable request logging
LOG_REQUESTS=true

# Enable performance monitoring
LOG_PERFORMANCE=true

# Sentry DSN for error tracking (optional)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_ENVIRONMENT=development

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------
# Enable/disable features
FEATURE_EMAIL_VERIFICATION=true
FEATURE_PASSWORD_RESET=true
FEATURE_OAUTH=true
FEATURE_WEBSOCKETS=true
FEATURE_EXPENSE_ATTACHMENTS=true
FEATURE_RECURRING_EXPENSES=true
FEATURE_SETTLEMENT_SCHEDULES=true
FEATURE_GROUP_CATEGORIES=true
FEATURE_BUDGETS=true
FEATURE_EXPORT_DATA=true

# ----------------------------------------------------------------------------
# Currency & Localization
# ----------------------------------------------------------------------------
# Default currency code (USD, EUR, GBP, etc.)
DEFAULT_CURRENCY=USD

# Supported currencies (comma-separated)
SUPPORTED_CURRENCIES=USD,EUR,GBP,CAD,AUD,JPY,INR,CNY,CHF,SEK,NOK,DKK

# Default locale
DEFAULT_LOCALE=en-US

# Supported locales (comma-separated)
SUPPORTED_LOCALES=en-US,es-ES,fr-FR,de-DE,it-IT,pt-BR,zh-CN,ja-JP

# Date format
DATE_FORMAT=MM/dd/yyyy

# ----------------------------------------------------------------------------
# Payment Configuration (for future payment integration)
# ----------------------------------------------------------------------------
# Stripe configuration (optional)
# STRIPE_PUBLISHABLE_KEY=pk_test_your_key
# STRIPE_SECRET_KEY=sk_test_your_key
# STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# PayPal configuration (optional)
# PAYPAL_CLIENT_ID=your-paypal-client-id
# PAYPAL_CLIENT_SECRET=your-paypal-client-secret
# PAYPAL_MODE=sandbox

# ----------------------------------------------------------------------------
# Third-party Integrations (optional)
# ----------------------------------------------------------------------------
# OpenAI API for expense categorization (optional)
# OPENAI_API_KEY=sk-your-openai-api-key

# Google Maps API for location-based features (optional)
# GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# ----------------------------------------------------------------------------
# Testing Configuration
# ----------------------------------------------------------------------------
# Test database URL (for integration tests)
TEST_DATABASE_URL=./data/test.db

# Enable test mode (disables certain features)
NODE_TEST=false

# Mock OAuth in tests (bypass real OAuth flow)
TEST_MOCK_OAUTH=true

# ----------------------------------------------------------------------------
# Deployment Configuration
# ----------------------------------------------------------------------------
# Deployment environment detection
DETECTION_MODE=vercel
# Options: vercel, docker, bare, custom

# Health check configuration
HEALTH_CHECK_PATH=/api/health
HEALTH_CHECK_ENABLED=true

# Maintenance mode
MAINTENANCE_MODE=false

# ----------------------------------------------------------------------------
# Backup & Archival
# ----------------------------------------------------------------------------
# Auto-archiving of inactive groups
AUTO_ARCHIVE_INACTIVE_GROUPS_DAYS=180

# Data retention settings
DATA_RETENTION_DAYS=365
DELETED_DATA_RETENTION_DAYS=30

# Backup configuration
BACKUP_SCHEDULE=daily
BACKUP_TIME=02:00
BACKUP_RETENTION_COUNT=30

# ----------------------------------------------------------------------------
# CDN Configuration (optional)
# ----------------------------------------------------------------------------
# CloudFront CDN
# CDN_DOMAIN=https://cdn.splitsync.app

# Cloudflare settings
# CLOUDFLARE_ZONE_ID=
# CLOUDFLARE_API_TOKEN=

# ============================================================================
# END OF ENVIRONMENT VARIABLES
# ============================================================================
# After configuring this file, rename it to .env.local
# For production deployment, use .env.production instead
# For staging deployment, use .env.staging instead
