{
  "version": 1,
  "issue": {
    "number": 411,
    "title": "Build SplitSync (Expense Sharing App)",
    "body": "# Product Requirements Document: SplitSync (Expense Sharing App)\n**Version:** 2.0 (Enhanced for Robustness & CI/CD)\n**Target:** Production-Ready MVP\n\n---\n\n## Tech Stack\n- Next.js 14 (App Router)  \n- TypeScript (strict mode)\n- SQLite + better-sqlite3\n- Drizzle ORM\n- Zod validation\n- NextAuth.js v5\n- Socket.io\n- Tailwind + shadcn/ui\n- React Hook Form\n- Vitest\n- GitHub Actions CI/CD\n\n---\n\n## Key Features\n1. Group management with invite links\n2. Expense tracking with equal splits\n3. Settlement algorithm (debt graph simplification)\n4. Real-time updates via Socket.io\n5. OAuth (Google) + Credentials auth\n6. Docker deployment\n\n---\n\n## IMPORTANT: CI Workflow File\nOne worker MUST create `.github/workflows/ci.yml` with lint, typecheck, test, and build jobs.\nThis file should be created early in the process to enable PR auto-merging.\n\n---\n\n## Robustness Requirements\n- Money stored as integers (cents)\n- Atomic transactions for financial data\n- Zod validation on all inputs\n- TypeScript strict mode\n\n---\n\n**Note:** 16th attempt. Auto-merge fix FULLY VERIFIED in attempt #15 (issue #407). 2/3 PRs auto-merged after Copilot COMMENTED reviews. System working correctly. Continuing to build SplitSync app."
  },
  "repo": {
    "owner": "mohsen1",
    "name": "claude-code-orchestrator-e2e-test"
  },
  "phase": "project_setup",
  "workBranch": "cco/411-build-splitsync-expense-sharing-app",
  "baseBranch": "main",
  "ems": [
    {
      "id": 0,
      "task": "Initialize Next.js 14 project with TypeScript strict mode, configure .gitignore, package.json with all dependencies (NextAuth, Socket.io, Drizzle, Zod, shadcn/ui, Vitest), tsconfig.json, and create shared types directory. Define core domain types (User, Group, Expense, Settlement) that all other EMs will import.",
      "focusArea": "Project Setup",
      "branch": "cco/issue-411-setup",
      "status": "workers_running",
      "workers": [
        {
          "id": 1,
          "task": "Initialize Next.js 14 project with TypeScript, create package.json with all dependencies (next, react, @types/react, next-auth, socket.io, drizzle-orm, better-sqlite3, zod, @radix-ui/react primitives, vitest, @vitejs/plugin-react, tailwindcss, typescript, react-hook-form), configure tsconfig.json with strict mode, and create .gitignore for Next.js project",
          "files": [
            "package.json",
            "tsconfig.json",
            ".gitignore",
            "next.config.js",
            "tailwind.config.ts",
            "postcss.config.js"
          ],
          "branch": "cco/issue-411-setup-w-1",
          "status": "in_progress",
          "reviewsAddressed": 0,
          "startedAt": "2026-01-21T08:14:46.186Z"
        },
        {
          "id": 2,
          "task": "Create shared types directory and define core domain types that all other EMs will import: User (id, name, email, oauth_provider), Group (id, name, invite_code, created_by), Expense (id, group_id, payer_id, amount_cents, description, split_type, created_at), Settlement (id, group_id, from_user_id, to_user_id, amount_cents, status)",
          "files": [
            "src/types/index.ts",
            "src/types/user.ts",
            "src/types/group.ts",
            "src/types/expense.ts",
            "src/types/settlement.ts"
          ],
          "branch": "cco/issue-411-setup-w-2",
          "status": "in_progress",
          "reviewsAddressed": 0,
          "startedAt": "2026-01-21T08:14:50.184Z"
        },
        {
          "id": 3,
          "task": "Create base directory structure and utility files: src/lib/utils.ts for cn() helper (shadcn/ui requirement), src/lib/constants.ts for app-wide constants, and src/lib/db/schema.ts as Drizzle schema base that will be extended by database EM",
          "files": [
            "src/lib/utils.ts",
            "src/lib/constants.ts",
            "src/lib/db/schema.ts",
            "src/app/layout.tsx",
            "src/app/globals.css",
            "src/components/ui/button.tsx"
          ],
          "branch": "cco/issue-411-setup-w-3",
          "status": "pr_created",
          "reviewsAddressed": 0,
          "startedAt": "2026-01-21T08:14:53.610Z",
          "prNumber": 412,
          "prUrl": "https://github.com/mohsen1/claude-code-orchestrator-e2e-test/pull/412",
          "completedAt": "2026-01-21T08:16:23.852Z"
        }
      ],
      "reviewsAddressed": 0,
      "startedAt": "2026-01-21T08:14:20.646Z"
    }
  ],
  "config": {
    "maxEms": 10,
    "maxWorkersPerEm": 3,
    "reviewWaitMinutes": 4,
    "prLabel": "cco"
  },
  "createdAt": "2026-01-21T08:11:53.487Z",
  "updatedAt": "2026-01-21T08:16:24.876Z",
  "analysisSummary": "Build SplitSync - a production-ready expense sharing app with group management, expense tracking, automatic settlement calculations, real-time updates via Socket.io, dual authentication (OAuth + credentials), and full CI/CD pipeline. Using Next.js 14, TypeScript, SQLite/Drizzle, and shadcn/ui.",
  "projectSetup": {
    "completed": false
  },
  "pendingEMs": [
    {
      "id": 1,
      "task": "Create GitHub Actions CI workflow (.github/workflows/ci.yml) with lint, typecheck, test, and build jobs. Configure ESLint, TypeScript compiler, Vitest for testing, and production build process. This enables PR auto-merging.",
      "focusArea": "CI/CD Pipeline",
      "branch": "cco/issue-411-em-1",
      "status": "pending",
      "workers": [],
      "reviewsAddressed": 0
    },
    {
      "id": 2,
      "task": "Design and implement database schema using Drizzle ORM. Create schema for users, groups, group_members, expenses, expense_splits, and settlements. Configure SQLite connection, migrations system, and database initialization. Ensure atomic transaction support for financial operations.",
      "focusArea": "Database Schema & Migrations",
      "branch": "cco/issue-411-em-2",
      "status": "pending",
      "workers": [],
      "reviewsAddressed": 0
    },
    {
      "id": 3,
      "task": "Implement NextAuth.js v5 authentication with both Google OAuth and credentials (email/password) providers. Create auth configuration, API routes, session management, and middleware for protected routes. Store user data in SQLite via Drizzle.",
      "focusArea": "Authentication System",
      "branch": "cco/issue-411-em-3",
      "status": "pending",
      "workers": [],
      "reviewsAddressed": 0
    },
    {
      "id": 4,
      "task": "Build group management features: create groups, generate invite links, join via invite, add/remove members, and group settings. Implement API routes for all group operations and ensure proper authorization (only members can access their groups).",
      "focusArea": "Group Management",
      "branch": "cco/issue-411-em-4",
      "status": "pending",
      "workers": [],
      "reviewsAddressed": 0
    },
    {
      "id": 5,
      "task": "Implement expense tracking with equal split logic. Create expense CRUD operations, store amounts as integers (cents), handle expense categories and descriptions, and automatically calculate splits among group members. All financial operations use atomic transactions.",
      "focusArea": "Expense Tracking",
      "branch": "cco/issue-411-em-5",
      "status": "pending",
      "workers": [],
      "reviewsAddressed": 0
    },
    {
      "id": 6,
      "task": "Implement debt graph simplification algorithm for optimal settlements. Calculate minimum number of transactions needed to settle all debts. Generate settlement proposals and track settlement status (pending, completed). Handle complex multi-party debt scenarios.",
      "focusArea": "Settlement Algorithm",
      "branch": "cco/issue-411-em-6",
      "status": "pending",
      "workers": [],
      "reviewsAddressed": 0
    },
    {
      "id": 7,
      "task": "Set up Socket.io server for real-time updates. Broadcast events when expenses are added, members join/leave, settlements occur. Implement room-based communication per group. Handle connection lifecycle and reconnection logic.",
      "focusArea": "Real-time Updates (Socket.io)",
      "branch": "cco/issue-411-em-7",
      "status": "pending",
      "workers": [],
      "reviewsAddressed": 0
    },
    {
      "id": 8,
      "task": "Build core UI components using shadcn/ui: Button, Card, Input, Form components (with React Hook Form), Modal/Dialog, Tables for expenses, Avatar for users, Badge for status. Ensure responsive design with Tailwind.",
      "focusArea": "UI Components Library",
      "branch": "cco/issue-411-em-8",
      "status": "pending",
      "workers": [],
      "reviewsAddressed": 0
    },
    {
      "id": 9,
      "task": "Create page layouts and routing structure. Build main layout with navigation, dashboard page showing user's groups, group detail page with expense list, expense creation modal, settlement page showing who owes whom. Integrate auth state into UI.",
      "focusArea": "Page Layouts & Routing",
      "branch": "cco/issue-411-em-9",
      "status": "pending",
      "workers": [],
      "reviewsAddressed": 0
    },
    {
      "id": 10,
      "task": "Implement client-side real-time UI integration. Connect to Socket.io from frontend, display live updates for new expenses, member changes, and settlements. Show online status of group members. Handle connection errors and reconnection.",
      "focusArea": "Real-time UI Integration",
      "branch": "cco/issue-411-em-10",
      "status": "pending",
      "workers": [],
      "reviewsAddressed": 0
    }
  ],
  "errorHistory": []
}