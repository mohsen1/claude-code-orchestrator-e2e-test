{
  "version": 1,
  "issue": {
    "number": 59,
    "title": "Build a URL Shortener Service",
    "body": "## Overview\nBuild a complete URL shortener service with analytics.\n\n## Requirements\n\n### Core Features\n1. **URL Shortening**\n   - Accept long URLs and return short codes (6 chars alphanumeric)\n   - Validate URL format before storing\n   - Prevent duplicate short codes\n   - Store original URL, short code, creation date, visit count\n\n2. **URL Redirection**\n   - Redirect short URLs to original URLs\n   - Track each visit (increment counter)\n   - Return 404 for unknown codes\n\n3. **Analytics API**\n   - Get stats for a short URL (visits, created date)\n   - List all URLs with pagination (10 per page)\n\n### Technical Requirements\n- TypeScript with strict mode\n- Express.js for HTTP server\n- In-memory Map for storage (no database needed)\n- Proper HTTP status codes\n- JSON request/response bodies\n\n### API Endpoints\n```\nPOST /api/shorten\n  Request: { url: string }\n  Response: { shortUrl: string, shortCode: string }\n\nGET /:code\n  Redirects to original URL or 404\n\nGET /api/stats/:code\n  Response: { url: string, visits: number, createdAt: string }\n\nGET /api/urls?page=1\n  Response: { urls: [...], total: number, page: number }\n```\n\n### File Structure\n```\nsrc/\n  index.ts        # Server entry point\n  routes.ts       # Express routes\n  storage.ts      # In-memory storage\n  utils.ts        # URL validation, code generation\n  types.ts        # TypeScript interfaces\n```\n\n## Acceptance Criteria\n- All endpoints work as specified\n- Invalid URLs return 400\n- Unknown codes return 404\n- Short codes are unique and random"
  },
  "repo": {
    "owner": "mohsen1",
    "name": "claude-code-orchestrator-e2e-test"
  },
  "phase": "worker_review",
  "workBranch": "cco/59-build-a-url-shortener-service",
  "baseBranch": "main",
  "ems": [
    {
      "id": 1,
      "task": "Implement core URL shortening infrastructure including in-memory storage, URL validation, and short code generation logic",
      "focusArea": "Core Infrastructure & Storage Layer",
      "branch": "cco/issue-59-em-1",
      "status": "workers_running",
      "workers": [
        {
          "id": 1,
          "task": "Create TypeScript type definitions for URL data structures. Define UrlEntry interface with properties: url (string), shortCode (string), createdAt (Date), visits (number). Define ApiResponse interfaces for shorten response, stats response, and urls list response with pagination.",
          "files": [
            "src/types.ts"
          ],
          "branch": "cco/issue-59-em-1-w-1",
          "status": "pr_created",
          "reviewsAddressed": 0,
          "startedAt": "2026-01-19T22:39:02.449Z",
          "prNumber": 60,
          "prUrl": "https://github.com/mohsen1/claude-code-orchestrator-e2e-test/pull/60",
          "completedAt": "2026-01-19T22:39:18.946Z"
        },
        {
          "id": 2,
          "task": "Implement URL validation and short code generation utilities. Create isValidUrl function that validates URL format using URL constructor and http/https protocol check. Create generateShortCode function that generates random 6-character alphanumeric strings (a-z, A-Z, 0-9). Create generateUniqueShortCode function that generates codes and checks for collisions using a provided Set of existing codes.",
          "files": [
            "src/utils.ts"
          ],
          "branch": "cco/issue-59-em-1-w-2",
          "status": "pr_created",
          "reviewsAddressed": 0,
          "startedAt": "2026-01-19T22:39:19.887Z",
          "prNumber": 61,
          "prUrl": "https://github.com/mohsen1/claude-code-orchestrator-e2e-test/pull/61",
          "completedAt": "2026-01-19T22:40:47.752Z"
        },
        {
          "id": 3,
          "task": "Implement in-memory storage layer. Create UrlStorage class with private Map<string, UrlEntry>. Implement methods: set(urlEntry) to store entry, get(shortCode) to retrieve entry, incrementVisits(shortCode) to increment counter and return updated entry, getAll() to return array of all entries, exists(shortCode) to check if code exists, getPaginated(page: number, limit: number) to return paginated results with total count. Export singleton instance.",
          "files": [
            "src/storage.ts"
          ],
          "branch": "cco/issue-59-em-1-w-3",
          "status": "pending",
          "reviewsAddressed": 0
        }
      ],
      "reviewsAddressed": 0,
      "startedAt": "2026-01-19T22:38:53.443Z"
    },
    {
      "id": 2,
      "task": "Build all HTTP API endpoints for URL shortening, redirection, analytics, and pagination with proper error handling",
      "focusArea": "API Layer & HTTP Routing",
      "branch": "cco/issue-59-em-2",
      "status": "pending",
      "workers": [],
      "reviewsAddressed": 0,
      "startedAt": "2026-01-19T22:38:53.443Z"
    },
    {
      "id": 3,
      "task": "Define TypeScript interfaces and types for the entire service, ensuring type safety across all components",
      "focusArea": "Type System & Data Contracts",
      "branch": "cco/issue-59-em-3",
      "status": "pending",
      "workers": [],
      "reviewsAddressed": 0,
      "startedAt": "2026-01-19T22:38:53.443Z"
    }
  ],
  "config": {
    "maxEms": 3,
    "maxWorkersPerEm": 3,
    "reviewWaitMinutes": 5,
    "prLabel": "cco"
  },
  "createdAt": "2026-01-19T22:38:34.272Z",
  "updatedAt": "2026-01-19T22:40:47.752Z"
}